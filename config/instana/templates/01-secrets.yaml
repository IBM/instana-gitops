---
{{ if and .Values.images.registry.ImagePullSecret.server .Values.images.registry.ImagePullSecret.create -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.images.registry.ImagePullSecret.name }}
  namespace: {{ .Values.spec.namespace.operator }}
  annotations:
    argocd.argoproj.io/sync-wave: "-10"
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ template "imagePullSecret" . }}
{{- end }}

---
{{ if and .Values.images.registry.ImagePullSecret.server .Values.images.registry.ImagePullSecret.create -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.images.registry.ImagePullSecret.name }}
  namespace: {{ .Values.spec.namespace.core }}
  annotations:
    argocd.argoproj.io/sync-wave: "-10"
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ template "imagePullSecret" . }}
{{- end }}

---
{{ if and .Values.images.registry.ImagePullSecret.server .Values.images.registry.ImagePullSecret.create -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.images.registry.ImagePullSecret.name }}
  namespace: {{ .Values.spec.namespace.units }}
  annotations:
    argocd.argoproj.io/sync-wave: "-10"
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ template "imagePullSecret" . }}
{{- end }}